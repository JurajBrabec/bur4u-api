## LINUX
## https://pm2.keymetrics.io/

#fix subscription

#enable proxy
export http_proxy=http://138.35.86.205:8088
export https_proxy=http://138.35.86.205:8088
export http_proxy=http://proxy-emea.svcs.entsvcs.com:8088
export https_proxy=http://proxy-emea.svcs.entsvcs.com:8088

#install node
sudo su
export https_proxy=http://proxy-emea.svcs.entsvcs.com:8088
curl -fsSL https://rpm.nodesource.com/setup_current.x | bash -
yum install -y nodejs
node -v
npm -v

#install pm2
npm install -g pm2@latest
pm2 -v

#install bur4u-api
mkdir /opt/bur4u-api /opt/bur4u-api/log
cp -r cert conf dist ui /opt/bur4u-api
mv /opt/bur4u-api/conf/bur4u-api.default.config.js /opt/bur4u-api/conf/bur4u-api.config.js
vi /opt/bur4u-api/conf/bur4u-api.config.js

#start bur4u-api and configure pm2 startup
pm2 start /opt/bur4u-api/src/bur4u-api.js --cwd /opt/bur4u-api --time -- --module proxy
pm2 save
pm2 startup

#manage
pm2 ls
pm2 logs
pm2 restart bur4u-api
pm2 reload bur4u-api
pm2 stop bur4u-api
pm2 delete bu4ur-api

## WINDOWS
## https://github.com/winsw/winsw

mkdir \bur4u-api \bur4u-api\log
copy node.exe dist\* cert\* bin\* \bur4u-api
#edit bin\bur4u-api.xml
\bur4u-api\bin\bur4u-api install [--user|--username <username>] [--pass|--password <password>]
net start bur4u-api

## JWT creation
https://jwt.io/
curl -k https://masterServer:28748/api/v1/token

## Certificate creation
https://certificatetools.com/
Use existing certificate as template
Change Commmon names, Country, Locality, Subject alternative names
